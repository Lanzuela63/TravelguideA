{% load user_tags %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Travel Guide</title>
  <link rel="stylesheet" href="{% static 'css/custom.css' %}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
</head>
<body class="{% block layout_class %}{% endblock %}">

<!-- HEADER / NAVBAR -->
<header>
  <nav class="navbar{% block sticky_nav_class %}{% endblock %}">
    <div class="nav-container nav-spread">
      <!-- Logo FAR LEFT -->
      <div class="nav-left">
        <a href="{% url 'public-home' %}">
          <img src="{% static 'images/base/travel_guide_logo.png' %}" alt="Travel Guide Logo" class="logo" />
        </a>
      </div>
      <!-- FAR RIGHT: User Menu -->
      <div class="nav-right">
        {% if user.is_authenticated %}
          <div class="user-menu dropdown">
            <img src="{% if user.profile.profile_picture %}{{ user.profile.profile_picture.url }}{% else %}{% static 'images/base/default_profile.png' %}{% endif %}"
                 alt="Profile Picture" class="user-pic">
            <span class="logo-text">Welcome, {{ user.username }}</span>
            <!-- Dropdown -->
            <div class="dropdown-content">
              <a href="{% url 'tourism:explore_spots' %}">Explore</a>
              <a href="#">Experiences</a>
              <a href="#">Reviews</a>
              <a href="{% url 'view_profile' %}">Profile</a>
              <a href="{% url 'edit_profile' %}">Edit Profile</a>
              <a href="{% url 'logout' %}">Logout</a>
            </div>
          </div>
        {% else %}
          <a href="{% url 'login' %}" class="sign-in-btn">Sign In</a>
        {% endif %}
      </div>
    </div>
  </nav>
</header>

<!-- MAIN CONTENT -->
<main class="container page-content{% block sticky_content_class %}{% endblock %}">
  {% if user.is_authenticated %}
    <div class="alert alert-success text-center mt-3" role="alert">
      <i class="bi bi-person-check"></i> Welcome back, {{ user.username }}!
    </div>
  {% endif %}
  {% block content %}
  {% endblock %}
</main>

<!-- FOOTER -->
<footer class="footer{% block sticky_footer_class %}{% endblock %}">
  <div class="container footer-container footer-even">
    <div class="footer-column footer-brand">
      <img src="{% static 'images/base/travel_guide_logo.png' %}" alt="Travel Guide Logo" class="footer-logo" />
      <div class="social-media">
        <a href="https://facebook.com" class="social-icon" target="_blank" rel="noopener">
          <img src="{% static 'images/base/facebook.png' %}" alt="Facebook" />
        </a>
        <a href="https://tiktok.com" class="social-icon" target="_blank" rel="noopener">
          <img src="{% static 'images/base/tiktok.png' %}" alt="TikTok" />
        </a>
        <a href="https://twitter.com" class="social-icon" target="_blank" rel="noopener">
          <img src="{% static 'images/base/twitter.png' %}" alt="X" />
        </a>
        <a href="https://instagram.com" class="social-icon" target="_blank" rel="noopener">
          <img src="{% static 'images/base/instagram.png' %}" alt="Instagram" />
        </a>
      </div>
    </div>

    <div class="footer-column">
      <h4>About</h4>
      <ul>
        <li><a href="#">About Travel Guide</a></li>
        <li><a href="#">Provinces</a></li>
        <li><a href="#">Press</a></li>
        <li><a href="#">Blog</a></li>
      </ul>
    </div>

    <div class="footer-column">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">AR Travel Guides</a></li>
        <li><a href="#">Tours</a></li>
        <li><a href="#">Reviews</a></li>
      </ul>
    </div>

    <div class="footer-column">
      <h4>Newsletter</h4>
      <form>
        <input type="email" placeholder="email_us@sample.com" />
        <button type="submit">Subscribe</button>
      </form>
    </div>
  </div>

  <div class="footer-bottom">
    <span>Terms and Conditions</span>
    <span class="divider"></span>
    <span>Privacy Policy</span>
    <span class="divider"></span>
    <span>&copy; 2025 TravelGuide</span>
  </div>
</footer>

<script>
  // Dropdown hover effect
  document.addEventListener("DOMContentLoaded", function() {
    const dropdown = document.querySelector(".user-menu");
    const menu = document.querySelector(".dropdown-content");
    if (dropdown && menu) {
      dropdown.addEventListener("mouseenter", () => menu.style.display = "block");
      dropdown.addEventListener("mouseleave", () => menu.style.display = "none");
    }
  });
</script>

</body>
</html>